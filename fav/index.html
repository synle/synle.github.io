<html>
  <!--  html -->
  <head>
    <title>Favorites</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
  </head>
  <body>
    <div id='fav'></div>
  </body>

  <!-- meta data -->
  <script>
const sites = `
# deals
  echojs|echojs.com
  woot|woot.com
  slickdeals|slickdeals.net
# code
  hacker news|hn.svelte.dev/top/1
# general
  lifehacker|lifehacker.com
  teamblind|teamblind.com
# tech
  google news|news.google.com/topstories
  engadget|www.engadget.com
  verge|www.theverge.com
  tech crunch|techcrunch.com
# stock
  //webull|webull.com/quote
  //seeking alpha|seekingalpha.com
  //motley fool|fool.com
  google finance|www.google.com/finance/portfolio/watchlist
  market watch|marketwatch.com
  cnbc|cnbc.com
  wallstreet bets|reddit.com/r/wallstreetbets
  thetagang|reddit.com/r/thetagang
# personal
  synle|synle.github.io
  bashrc|synle.github.io/app/setup-bash-profile.html
  fix link|https://synle.github.io/link/index.html
  nav generator|https://synle.github.io/link/nav-generator.html
  plex|https://app.plex.tv
`
  </script>

  <!-- script starts here -->
  <script>
    const sitesData = sites.split('\n').map( s => s.trim().replace('http://', '').replace('https://', '')).filter(s => !!s && !s.match(/^\/\//)).map(
      s => {
        if(s[0] === '#'){
          return {
            name: s.replace(/#/g, '').trim(),
            type: 'section',
          }
        } else {
          let url, name;
          const splits = s.split('|');

          if(splits.length === 2){
            url = splits[1];
            name = splits[0];
          }
          else {
            url = s;
            name = s.substr(0, s.indexOf('/') > 0 ? s.indexOf('/') : s.length);
          }

          return {
            url,
            name: name,
            type: 'link',
          }
        }
      }
    )

    let dom = ''
    for (const site of sitesData){
      switch(site.type){
        case 'section':
          dom += `
            <span>${site.name}</span>
          `
          break;
        case 'link':
          dom += `
            <a href='https://${site.url}' title='${site.name}'">${site.name}</a>
          `
          break;
      }      
    }
    document.querySelector('#fav').innerHTML = dom;

    // dark or day theme
    const isDarkMode = new Date().getHours() >= 19 || new Date().getHours() <= 8;
    document.querySelector('html').classList.toggle('darkTheme', isDarkMode)
  </script>

  <!--  styles -->
  <style>
    html {
      --borderSize: 3px;

      /* light */
      --colorMainLight: #242424;
      --colorSecondaryLight: #4183c4;
      --colorBgMainLight: #fafafa;
      --colorBgSecondaryLight: #fff;
      --colorBorderMainLight: #999;
      --colorBorderSecondaryLight: #000;
      --colorLink: blue;

      /* dark */
      --colorMainDark: #f8f8f2;
      --colorSecondaryDark: #f8f8f2;
      --colorBgMainDark: #282a36;
      --colorBgSecondaryDark: #6272a4;
      --colorBorderMainDark: #aaaec9;
      --colorBorderSecondaryDark: #8be9fd;
      --colorLink: #f1fa8c;
    }

    html{
      --colorMain: var(--colorMainLight);
      --colorSecondary: var(--colorSecondaryLight);
      --colorBgMain: var(--colorBgMainLight);
      --colorBgSecondary: var(--colorBgSecondaryLight);
      --colorBorderMain: var(--colorBorderMainLight);
      --colorBorderSecondary: var(--colorBorderSecondaryLight);
    }

    html.darkTheme{
      --colorMain: var(--colorMainDark);
      --colorSecondary: var(--colorSecondaryDark);
      --colorBgMain: var(--colorBgMainDark);
      --colorBgSecondary: var(--colorBgSecondaryDark);
      --colorBorderMain: var(--colorBorderMainDark);
      --colorBorderSecondary: var(--colorBorderSecondaryDark);
    }

    @media (prefers-color-scheme: dark) {
      html{
        --colorMain: var(--colorMainDark);
        --colorSecondary: var(--colorSecondaryDark);
        --colorBgMain: var(--colorBgMainDark);
        --colorBgSecondary: var(--colorBgSecondaryDark);
        --colorBorderMain: var(--colorBorderMainDark);
        --colorBorderSecondary: var(--colorBorderSecondaryDark);
      }
    }

    body{
      background: var(--colorBgMain);
      color: var(--colorMain);
      font-family: "Helvetica Neue",Helvetica,Arial,sans-serif;
      display: flex;
      flex-direction: row;
      justify-content: center;
      align-items: center;
    }

    #fav{
      width: 100%;
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(150px, 180px));
      grid-gap: 2rem 1.2rem;
      justify-content: center;
    }
    
    #fav > * {
      text-transform: uppercase;
      display: block;
      font-size: 1.1rem;
    }

    #fav span{
      grid-column-start: 1;
      grid-column-end: 2;
      font-weight: 900;
      padding-left: 1rem;
      border-left: 10px solid var(--colorLink);
      color: var(--colorLink);
    }
    
    #fav span + a{
      grid-column-start: 1;
      grid-column-end: 2;
    }

    #fav a{
      border: var(--borderSize) solid var(--colorBorderMain);
      padding: 1rem 0.5rem;
      text-overflow: ellipsis;
      overflow: hidden;
      background: var(--colorBgSecondary);
      color: var(--colorSecondary);
      text-align: center;
      text-decoration: none;
      border-radius: 5px;
    }

    #fav a:active{
      filter: invert(100%);
    }

    #fav a:hover {
      opacity: 1;
      border-color: var(--colorBorderSecondary);
    }
  </style>
</html
