<body></body>
<script>
  const targetURLSearchParams = new URLSearchParams(window.location.search);
  let url = targetURLSearchParams.get('state');

  targetURLSearchParams.set('state', `${location.origin}${location.pathname}`);
  url = `${url}?${targetURLSearchParams.toString()}`;

  const link = document.createElement('a');
  link.textContent = url;
  link.href = url;

  // Append the div to the body of the document
  document.body.appendChild(link);

  if (
    url.includes('192.168.') ||
    url.includes('localhost') ||
    url.includes('tplinkdns.com')
  ) {
    location.href = url;
  } else {
    setTimeout(() => (location.href = url), 2000);
  }
</script>
